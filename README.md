# Отчёт команды KiberChuvsu по проделанной работе 

## Демо режим офлайн в ЦД  
1. Получили дрон
2. В KOS модуле настроили корректное включение двигателей, инициализацию систем и т.п
3. Настроили миссию в APM планере.
4. Запустили ЦД
5. Успешно отработали миссию.
   
## Полёт в офлайн 
1. Создали прошивку для модуля безопасности дрона kos-image и загрузили в дрон
2. Настроили WI-FI дрона и подключились к нему.
3. Подключили дрон к APM Planner-у и успешно выполнили миссию

## Демо режим онлайн в ЦД 
1. Запустили локальный сервер ОРВД
2. В KOS модуле добавили возможность отработки ARM/DISARM с помощью запроса fly_accept и проверили работоспособность KillSwitch. Теперь дрон начинает снижаться, если убрать галочку с "разрешение на полёт".
3. Изменили ID дрона и подклчючили его к ОРВД
4. Загрузили миссию в ОРВД и пролетели миссию
5. Проверели корректнотсь работы ARM/DISARM в ОРВД

## Полёт в онлайн 
1. Создали прошивку для модуля безопасности дрона kos-image и загрузили в дрон
2. Подключились к ОРВД и закинули туда миссию
3. Настроили WI-FI дрона и подключились к нему
4. Пролетели миссию с ОРВД
5. Проверели корректнотсь работы ARM/DISARM в ОРВД

## Демо режим онлайн в ЦД с КП
Есть 4 вида киберпрепяствий:
1. Сброс груза в  неположенном месте
2. Повышение скорости
3. Повышение высоты
4. Изменение полётной миссии.
### Наше решение проблемы 
Чтобы решить киберпрепяствия 1, 3 и 4 мы разработали систему коридоров. Коридор представляет из себя две соседние точки, а также набор функций для проверки того, что дрон находится в пределах этого коридора с заданной точностью (точность задается отдельно для горизонтального отклонения и для отклонения по высоте). Теперь модуль безопасности может понимать в каком коридоре он находится, это поможет нам сбросить груз там, где это надо. Для этого мы находим команду сброса (ее номер) и коридор, предшествующий ей, чтобы полностью заблокировать привод до тех пор, пока дрон не подлетит к месту сброса.  Для решения препятствия 2 мы реализовали функцию, раз в определенное время проверяющей прошедшее расстояние, что легко позволяет нам найти скорость, и, в случае превышения, отправить запрос на изменение скорости. Так как киберпрепятствия независимы друг от друга (например, препятствие 1 может произойти одновременно, с препятствиями 2, 3 или 4, и т.п.),  все функции проверки вынесены в отдельные потоки и работают независимо. Кроме того, такая структура проверок также повышает быстродействие всей системы (выполнение "длинных" операций одной проверки не мешает другим).
## Полёт в онлайн с КП 
в работе 
